<!-- forms_app/templates/forms_app/form12_upload.html -->
{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>Form 12: –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–∂–¥–æ–º—É –ê—Ä—Ç–∏–∫—É–ª—É</h2>
        <div>
            <a href="{% url 'forms_app:form12_list' %}" class="btn btn-secondary">
                üìã –ö —Å–ø–∏—Å–∫—É –∞—Ä—Ç–∏–∫—É–ª–æ–≤
            </a>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="card">
        <div class="card-header">
            <h4 class="mb-0">–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ "–ü—Ä–æ–¥–∞–∂–∏" </h4>
        </div>
        <div class="card-body">
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}

                <div class="mb-3">
                    <label for="{{ form.file.id_for_label }}" class="form-label">
                        –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª—ã (.xlsx):
                    </label>
                    {{ form.file }}
                    <div class="form-text">
                        –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ñ–∞–π–ª—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ Excel.
                    </div>
                </div>

                <button type="submit" class="btn btn-success w-100 py-2">
                    üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã
                </button>
            </form>
        </div>
    </div>

    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show mt-3" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
        {% endfor %}
    {% endif %}

    <!-- –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å -->
    <div class="my-4 text-center">
        <hr style="border-top: 2px dashed #dee2e6; margin: 2rem 0;">
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ –æ—á–∏—Å—Ç–∫–∏ - –û–¢–î–ï–õ–¨–ù–´–ô –ë–õ–û–ö -->
    {% if articles_count > 0 %}
    <div class="card border-danger">
        <div class="card-header bg-danger text-white">
            <h4 class="mb-0">‚ö†Ô∏è –û–ø–∞—Å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è</h4>
        </div>
        <div class="card-body text-center">
            <a href="{% url 'forms_app:form12_clear' %}" 
               class="btn btn-outline-danger btn-lg" 
               onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –í–°–ï –¥–∞–Ω–Ω—ã–µ Form 12?\\n\\n–ë—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π: {{ articles_count }}\\n\\n–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.');">
                üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ ({{ articles_count }})
            </a>
            <small class="d-block text-muted mt-2">
                –í–Ω–∏–º–∞–Ω–∏–µ! –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ —É–¥–∞–ª–∏—Ç –≤—Å–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–º–µ–Ω–µ–Ω–æ.
            </small>
        </div>
    </div>
    {% endif %}
</div>

<style>
.card-border-danger {
    border: 2px solid #dc3545;
}

.btn-outline-danger:hover {
    background-color: #dc3545;
    color: white;
}
</style>
{% endblock %}