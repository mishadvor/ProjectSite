<!-- forms_app/templates/forms_app/form12_edit.html -->
{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ Form 12</h2>
        <div>
            <a href="{% url 'forms_app:form12_detail' record.wb_article %}" class="btn btn-secondary">
                ‚Üê –ù–∞–∑–∞–¥ –∫ –¥–µ—Ç–∞–ª—è–º
            </a>
        </div>
    </div>

    <!-- –í—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–π -->
    {% if messages %}
    <div class="messages">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <div class="card">
        <div class="card-header">
            <h5 class="mb-0">–ê—Ä—Ç–∏–∫—É–ª WB: {{ record.wb_article }}</h5>
            <small class="text-muted">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {{ record.user.username }} | –î–∞—Ç–∞: {{ record.date|date:"d.m.Y" }}</small>
        </div>
        <div class="card-body">
            {% if form.errors %}
            <div class="alert alert-danger">
                <strong>‚ùå –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏!</strong>
                <ul class="mb-0 mt-2">
                {% for field, errors in form.errors.items %}
                    {% for error in errors %}
                    <li>{{ field }}: {{ error }}</li>
                    {% endfor %}
                {% endfor %}
                </ul>
            </div>
            {% endif %}

            <form method="post">
                {% csrf_token %}
                
                <!-- –°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
                <input type="hidden" name="user" value="{{ request.user.id }}">
                
                <!-- –°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ –¥–ª—è –¥–∞—Ç—ã -->
                <input type="hidden" name="date" value="{{ record.date|date:'Y-m-d' }}">
                
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label form-edit-label">–î–∞—Ç–∞:</label>
                            <input type="text" class="form-control form-edit-control" value="{{ record.date|date:'d.m.Y' }}" readonly>
                            <small class="text-muted">–î–∞—Ç–∞ –Ω–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è</small>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="{{ form.wb_article.id_for_label }}" class="form-label form-edit-label">–ê—Ä—Ç–∏–∫—É–ª WB:</label>
                            {{ form.wb_article }}
                            {% if form.wb_article.errors %}
                                <div class="text-danger">{{ form.wb_article.errors }}</div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="{{ form.seller_article.id_for_label }}" class="form-label form-edit-label">–ê—Ä—Ç–∏–∫—É–ª –ø—Ä–æ–¥–∞–≤—Ü–∞:</label>
                            {{ form.seller_article }}
                            {% if form.seller_article.errors %}
                                <div class="text-danger">{{ form.seller_article.errors }}</div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="{{ form.barcode.id_for_label }}" class="form-label form-edit-label">–ë–∞—Ä–∫–æ–¥:</label>
                            {{ form.barcode }}
                            {% if form.barcode.errors %}
                                <div class="text-danger">{{ form.barcode.errors }}</div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="{{ form.size.id_for_label }}" class="form-label form-edit-label">–†–∞–∑–º–µ—Ä:</label>
                            {{ form.size }}
                            {% if form.size.errors %}
                                <div class="text-danger">{{ form.size.errors }}</div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="{{ form.orders_qty.id_for_label }}" class="form-label form-edit-label">–ó–∞–∫–∞–∑—ã, —à—Ç.:</label>
                            {{ form.orders_qty }}
                            {% if form.orders_qty.errors %}
                                <div class="text-danger">{{ form.orders_qty.errors }}</div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="{{ form.order_amount_net.id_for_label }}" class="form-label form-edit-label">–°—É–º–º–∞ –∑–∞–∫–∞–∑–æ–≤ –º–∏–Ω—É—Å –∫–æ–º–∏—Å—Å–∏—è WB, —Ä—É–±.:</label>
                            {{ form.order_amount_net }}
                            {% if form.order_amount_net.errors %}
                                <div class="text-danger">{{ form.order_amount_net.errors }}</div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="{{ form.sold_qty.id_for_label }}" class="form-label form-edit-label">–í—ã–∫—É–ø–∏–ª–∏, —à—Ç.:</label>
                            {{ form.sold_qty }}
                            {% if form.sold_qty.errors %}
                                <div class="text-danger">{{ form.sold_qty.errors }}</div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="{{ form.transfer_amount.id_for_label }}" class="form-label form-edit-label">–ö –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—é –∑–∞ —Ç–æ–≤–∞—Ä, —Ä—É–±.:</label>
                            {{ form.transfer_amount }}
                            {% if form.transfer_amount.errors %}
                                <div class="text-danger">{{ form.transfer_amount.errors }}</div>
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label for="{{ form.current_stock.id_for_label }}" class="form-label form-edit-label">–¢–µ–∫—É—â–∏–π –æ—Å—Ç–∞—Ç–æ–∫, —à—Ç.:</label>
                            {{ form.current_stock }}
                            {% if form.current_stock.errors %}
                                <div class="text-danger">{{ form.current_stock.errors }}</div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <div class="d-flex gap-2 mt-4">
                    <button type="submit" class="btn btn-primary form-edit-btn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                    <a href="{% url 'forms_app:form12_detail' record.wb_article %}" class="btn btn-secondary form-edit-btn">‚ùå –û—Ç–º–µ–Ω–∞</a>
                </div>
            </form>
        </div>
    </div>
</div>

<style>
/* –°—Ç–∏–ª–∏ –¢–û–õ–¨–ö–û –¥–ª—è —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è */
.form-edit-control {
    border-radius: 8px;
    padding: 10px;
    border: 1px solid #ddd;
    color: #000000 !important;
    background-color: #ffffff !important;
}

.form-edit-control:read-only {
    background-color: #f8f9fa !important;
    color: #6c757d !important;
}

.form-edit-control::placeholder {
    color: #6c757d !important;
    opacity: 1;
}

.form-edit-label {
    font-weight: 600;
    margin-bottom: 8px;
    color: #000000 !important;
}

.form-edit-btn {
    border-radius: 8px;
    padding: 10px 20px;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã Django */
form input, 
form select, 
form textarea {
    color: #000000 !important;
    background-color: #ffffff !important;
}

form input:read-only {
    background-color: #f8f9fa !important;
    color: #6c757d !important;
}

/* –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ —Ñ–æ—Ä–º—ã */
.card-body .form-control {
    color: #000000 !important;
    background-color: #ffffff !important;
}

.card-body .form-label {
    color: #000000 !important;
}

/* –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ —Ç–µ–∫—Å—Ç –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ —á–µ—Ä–Ω—ã–π */
.card,
.card-header,
.card-body {
    color: #000000 !important;
}

.card-header h5,
.card-header small {
    color: #000000 !important;
}
</style>
{% endblock %}