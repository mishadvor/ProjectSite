<!-- templates/forms_app/form4_upload.html -->
{% extends "forms_app/base_form.html" %} {% block title %}–§–æ—Ä–º–∞ 4: –ó–∞–≥—Ä—É–∑–∫–∞
–¥–∞–Ω–Ω—ã—Ö{% endblock %} {% block content %}
<h2>üì§ –§–æ—Ä–º–∞ 4: –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª –∏–∑ –§–æ—Ä–º—ã 2</h2>
<p>–î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω—É—é –±–∞–∑—É –ø–æ –∞—Ä—Ç–∏–∫—É–ª–∞–º.</p>

{% if messages %} {% for message in messages %}
<p
  style="color:
                {% if message.tags == 'error' %}red
                {% elif message.tags == 'warning' %}orange
                {% else %}green{% endif %};
                font-weight: bold;"
>
  {{ message }}
</p>
{% endfor %} {% endif %}

<form method="post" enctype="multipart/form-data" id="uploadForm">
  {% csrf_token %}
  <label for="file">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª Excel (.xlsx):</label>
  <br /><br />
  {{ form.as_p }}
  <button type="submit" class="btn">–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
</form>

<!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
<div id="loading" style="display: none; margin-top: 20px; color: #007bff">
  <p>‚è≥ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–∞... –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥.</p>
</div>

<!-- –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–∫–∞–∑–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("uploadForm");
    const loading = document.getElementById("loading");

    if (form && loading) {
      form.addEventListener("submit", function () {
        loading.style.display = "block";
      });
    }
  });
</script>

<!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
{% if user.is_authenticated %}
<div
  style="
    margin-top: 40px;
    padding: 15px;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    background-color: #f9f9f9;
  "
>
  <h3>üîç –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –≤ —Å–∏—Å—Ç–µ–º–µ</h3>
  <ul style="list-style: none; padding: 0">
    <li>
      <a href="{% url 'forms_app:form4_list' %}" class="btn"
        >üìã –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∞—Ä—Ç–∏–∫—É–ª—ã</a
      >
    </li>
    <li style="margin-top: 10px">
      <a href="{% url 'forms_app:form4_export' %}" class="btn"
        >‚¨áÔ∏è –í—ã–≥—Ä—É–∑–∏—Ç—å –≤—Å—ë –≤ Excel</a
      >
    </li>
  </ul>
  <a href="{% url 'home:home' %}" class="btn" style="margin-top: 15px"
    >‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a
  >
</div>
{% endif %} {% endblock %}
